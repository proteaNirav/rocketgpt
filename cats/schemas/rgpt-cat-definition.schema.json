{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "rgpt://schemas/rgpt-cat-definition.schema.json",
  "title": "RocketGPT CAT Definition",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "cat_id",
    "name",
    "owner",
    "type",
    "version",
    "entrypoint",
    "runtime_mode",
    "requires_approval",
    "allowed_side_effects"
  ],
  "properties": {
    "cat_id": {
      "type": "string",
      "pattern": "^RGPT-CAT-[0-9]{2}$",
      "description": "Stable CAT identifier (e.g., RGPT-CAT-01)."
    },
    "name": { "type": "string", "minLength": 3 },
    "description": { "type": "string" },
    "owner": {
      "type": "string",
      "enum": ["system", "user"],
      "description": "system = built-in; user = user-created."
    },
    "type": {
      "type": "string",
      "enum": ["governance", "ops", "analysis", "demo"],
      "description": "High-level category for governance decisions."
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "entrypoint": {
      "type": "string",
      "minLength": 3,
      "description": "Relative path to the CAT runner/handler file."
    },
    "runtime_mode": {
      "type": "string",
      "enum": ["strict", "standard", "demo"],
      "description": "Runtime enforcement preset; demo still logs and replays."
    },
    "requires_approval": { "type": "boolean" },
    "allowed_side_effects": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": ["none", "ledger_write", "read_only", "workflow_dispatch"]
      },
      "description": "Explicitly enumerated side-effects."
    },
    "inputs_schema": {
      "type": "object",
      "description": "Optional JSON schema for CAT inputs (inline)."
    },
    "tags": {
      "type": "array",
      "items": { "type": "string" }
    }
  }
}
